{"version":3,"file":"glob-sort.js","sourceRoot":"","sources":["glob-sort.ts"],"names":[],"mappings":";AAAA;;GAEG;;AAEH,mDAA+D;AAC/D,kDAA+C;AAC/C,iCAA6D;AAC7D,qCAAyC;AAGzC,SAAgB,QAAQ,CAAC,EAAY,EAAE,MAAM,GAAG,0BAAmB,EAAE,UAAoB,EAAE;IAE1F,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,IAAI,CAAC,CAAC;IAEjC,IAAI,MAAM,IAAI,IAAI,EAClB;QACC,MAAM,GAAG,0BAAmB,CAAC;KAC7B;IAED,IAAI,CAAC,GAAG,2BAAU,CAAC,EAAE,CAAC,CAAC;IACvB,IAAI,MAAM,GAAG,EAAE,CAAC;IAChB,IAAI,EAAE,GAAG,WAAI,CAAC,CAAC,EAAE,UAAU,CAAC,EAAE,CAAC,EAAE,KAAK;QAErC,OAAO,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;IAC3C,CAAC,CAAC,CAAC;IAEH,SAAS,EAAE,CAAC,CAAS,EAAE,KAAK;QAE3B,KAAK,GAAG,MAAM,CAAC;QAEf,IAAI,CAAC,IAAI,KAAK,EACd;YACC,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC;SAChB;QAED,KAAK,CAAC,CAAC,CAAC,GAAG,sBAAa,CAAC,CAAC,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC;QAE7C,MAAM,GAAG,KAAK,CAAC;QAEf,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC;IAED,OAAO,2BAAU,CAAC,EAAE,CAAC,CAAC;AACvB,CAAC;AAjCD,4BAiCC;AAED;;;;;;;;;;;;;;;;;EAiBE","sourcesContent":["/**\n * Created by user on 2018/3/29/029.\n */\n\nimport { globToTree, treeToGlob, ITree } from 'glob-tree-list';\nimport { sort } from 'glob-tree-list/lib/util';\nimport { naturalCompare, defaultSortCallback } from './sort';\nimport { normalize_val } from './helper';\nimport { IOptions } from './options';\n\nexport function sortTree(ls: string[], sortFn = defaultSortCallback, options: IOptions = {}): string[]\n{\n\tlet padNum = options.padNum || 5;\n\n\tif (sortFn == null)\n\t{\n\t\tsortFn = defaultSortCallback;\n\t}\n\n\tlet t = globToTree(ls);\n\tlet _cache = {};\n\tlet t2 = sort(t, function (a, b, cache)\n\t{\n\t\treturn sortFn(_c(a, cache), _c(b, cache));\n\t});\n\n\tfunction _c(k: string, cache): string\n\t{\n\t\tcache = _cache;\n\n\t\tif (k in cache)\n\t\t{\n\t\t\treturn cache[k];\n\t\t}\n\n\t\tcache[k] = normalize_val(k, padNum, options);\n\n\t\t_cache = cache;\n\n\t\treturn cache[k];\n\t}\n\n\treturn treeToGlob(t2);\n}\n\n/*\nlet data = `00020_1章.txt\n00020_2章/\n00020_3章/\n00020_3章/3章 8話.txt\n00020_3章/3章 10話.txt\n00020_3章/3章 11話.txt\n00020_3章/3章 12話.txt\n00020_3章/3章 13話.txt\n00020_3章/3章 9話/3章 9話file.txt\n00020_3章/3章 14話.txt\n00020_3章/3章 15.5話 特別閑話.txt\n00020_3章/3章 16話.txt\n00020_3章/3章 15話.txt\n00020_3章/3章 17話.txt`.split(\"\\n\");\n\nconsole.log(sortTree(data));\n*/\n"]}